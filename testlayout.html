<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Layout test</title>
    <link rel="stylesheet" href="threads.css">
    <script type="module" defer>
        import { reloadWithView } from './layout.js';
        function do_reloadWithView(view) {
            reloadWithView(view);
        }
    </script>
</head>
<body>
    <div>
        <b><a href="https://github.com/thesamovar/thread-navigator">Thread Navigator</a></b> is a project by <a href="https://neural-reckoning.org/dan_goodman.html">Dan Goodman</a> to experiment with different ways to display deeply nested social media threads.
    </div>
    <div>
        <button id="view_tree">Tree view</button>
        <button id="view_linear">Linear context view</button>
    </div>
    <details>
        <summary>Click for documentation</summary>
        <div class="documentation">
            <p>The easiest way to use this is to create a <a href="https://en.wikipedia.org/wiki/Bookmarklet">bookmarklet</a> that opens the thread viewer on the thread you currently have open. To do this, create a new bookmark in your browser with title "Navigate thread" or whatever you like, and for the URL insert the following code:</p>
            <pre>javascript:(() => {const url = encodeURIComponent(window.location.href); window.open(`https://thesamovar.github.io/thread-navigator/index.html?url=${url}`, '_blank');})()</pre>
            <p>There are multiple possible thread views, but at the moment you have to specify them by hand by adding to the URL of the loaded page <code>&amp;view=...</code> where the <code>...</code> can be one of:</p>
            <ul>
                <li><code>&amp;view=tree</code> - indented hierarchy / tree view.</li>
                <li><code>&amp;view=linear</code> - linear context view: items appear in order of posting in middle column, with parent to the left and first reply to the right. The idea is to help you keep track of long threads over time by seeing the newest posts at the bottom, but also being able to place them in their context.</li>
            </ul>
            <p>Current support and issues:</p>
            <ul>
                <li>
                    Bluesky: working (limited).
                    <ul>
                        <li>You need to be on the root post of the thread.</li>
                        <li>Only gets the thread up to depth 6 (not sure why not, should work).</li>
                        <li>Content isn't formatted, just raw text and no images, cards, etc.</li>
                    </ul>
                </li>
                <li>
                    Mastodon: working (limited).
                    <ul>
                        <li>Not guaranteed to fetch all replies (although this should work on <a href="https://neuromatch.social">neuromatch.social</a>).</li>
                        <li>Images and cards seems to be broken.</li>
                    </ul>
                </li>
                <li>There's basically no error handling at the moment so you might need to refresh if it doesn't work.</li>
                <li>
                    Tree view
                    <ul>
                        <li>Not yet collapsible.</li>
                        <li>No sorting options yet.</li>
                    </ul>
                </li>
                <li>
                    Linear context view
                    <ul>
                        <li>Unstyled, only supports one parent and reply. Not sortable.</li>
                    </ul>
                </li>
                <li>
                    No colouring options for the left bar. The idea is that it shows how much engagement the post and replies have.
                </li>
            </ul>
            <p>Check out the project and help out at <a href="https://github.com/thesamovar/thread-navigator">https://github.com/thesamovar/thread-navigator</a>.</p>
        </div> 
    </details>

    <details open>
        <summary style="list-style: none;">
    <div class="post" style="margin-left: 0px; ">
        <div class="post-left" style="background-color: rgb(204, 51, 51);">
            <img src="https://cdn.bsky.app/img/avatar/plain/did:plc:3wdc7dmw4l7uxgwfwixm7lc5/bafkreiatayjuogwtxuartmw67lrmso6bpixxci6cdrj3ib7clpxp5dlixi@jpeg" class="post-profile">
        </div>
        <div class="post-right" style="display: flex; flex-direction: column; ">
            <div class="post-body" style="flex: 1;">
                <div class="post-author">
                    <span class="post-displayname">Richard Sever</span>
                    (<a class="post-handle" href="https://bsky.app/profile/did:plc:3wdc7dmw4l7uxgwfwixm7lc5">@richardsever.bsky.social</a>)
                    <a class="post-indexed" href="https://bsky.app/profile/did:plc:3wdc7dmw4l7uxgwfwixm7lc5/post/3law46gxckc26">14/11/2024, 14:47:51</a>
                </div>
                <div class="post-content">
                    Clarivate will strip eLife of its Impact Factor
                    They never wanted one but will be interesting to see how this affects submissions given academia's obsession with it.
                    retractionwatch.com/2024/11/13/e...
                    But 1/2
                </div>
            </div>
            <div class="post-engagement">
                <span class="engagement-post">‚Ü©Ô∏è 14 üîÅ 80 ‚≠ê 157</span>
                <span class="engagement-thread">Thread: ‚Ü©Ô∏è 117 üîÅ 117 ‚≠ê 577</span>
            </div>
        </div>
    </div> 
    </summary>
    <div class="subthread" style="margin-left: 80px;">
        <div class="post" style="margin-left: 0px;">
            <div class="post-left" style="background-color: rgb(204, 51, 51);">
                <img src="https://cdn.bsky.app/img/avatar/plain/did:plc:3wdc7dmw4l7uxgwfwixm7lc5/bafkreiatayjuogwtxuartmw67lrmso6bpixxci6cdrj3ib7clpxp5dlixi@jpeg" class="post-profile">
            </div>
            <div class="post-right" style="display: flex; flex-direction: column; ">
                <div class="post-body" style="flex: 1;">
                    <div class="post-author">
                        <span class="post-displayname">Richard Sever</span>
                        (<a class="post-handle" href="https://bsky.app/profile/did:plc:3wdc7dmw4l7uxgwfwixm7lc5">@richardsever.bsky.social</a>)
                        <a class="post-indexed" href="https://bsky.app/profile/did:plc:3wdc7dmw4l7uxgwfwixm7lc5/post/3law46gxckc26">14/11/2024, 14:47:51</a>
                    </div>
                    <div class="post-content">
                        Clarivate will strip eLife of its Impact Factor
                        They never wanted one but will be interesting to see how this affects submissions given academia's obsession with it.
                        retractionwatch.com/2024/11/13/e...
                        But 1/2
                    </div>
                </div>
                <div class="post-engagement">
                    <span class="engagement-post">‚Ü©Ô∏è 14 üîÅ 80 ‚≠ê 157</span>
                    <span class="engagement-thread">Thread: ‚Ü©Ô∏è 117 üîÅ 117 ‚≠ê 577</span>
                </div>
            </div>
        </div> 
    </div>
    </details>  
</body>
</html>